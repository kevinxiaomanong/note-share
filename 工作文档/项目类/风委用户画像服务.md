### 1、Optional使用

java8来防止NPE问题

Optional的用法



### 2、Mockito

**为什么我们要用Mock去模拟？**

--测试不可避免会对数据库进行操作，不可避免可能对测试环境有影响

Mock即创建一个虚拟的对象或者说模拟出一个对象，我们可以对这个对象的行为定义



**Mockito的API用法**

1、mock方法 通过Mockito.mock方法来mock一个类

2、验证和断言 通过Mockito.verify来验证对象是否发生过某些行为，可以搭配times()来校验发送的次数

断言使用到的类是Assertions

要注意如果不对Mock的行为进行定义，则Mock对象方法的返回值为返回类型的默认值，这也告诉我们如果你mock出来一个对象那就要对它的行为进行定义,名为打桩

3、 when

通过when去定义一些行为

4、mock注解

可以通过@Mock搭配 MockitAnnotations.openMocks(当前测试类)来开启

5、BeforeEach/AfterEach

即测试前后会执行该方法

6、Spy方法与注解

被spy的对象会走真实的方法，而mock对象不会

spy()方法的参数是对象实例，而mock的参数是class



所以总体看下来Mockito的四大功能

对象模拟mock、真实模拟spy、行为验证verify、结果断言assert



**Mock API扩展**

1、打桩扩展 

thenThrow

我们写单元测试时肯定会考虑通过和失败的两种情况，即我们对于异常这种程序的出口也要覆盖到

 thenCallRealMethod

走真实的方法

2、mock静态方法

 





Mock的原理



**文档格式**

sql

应用场景

解决方案